<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Forestry Thinning Schemes — silv_treatment_thinning • silviculture</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Merriweather-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Forestry Thinning Schemes — silv_treatment_thinning"><meta name="description" content="Calculates thinning schemes for forest management by selecting trees to extract
based on specified criteria. Supports both thinning from below (removing smaller trees)
and thinning from above (removing larger trees) approaches."><meta property="og:description" content="Calculates thinning schemes for forest management by selecting trees to extract
based on specified criteria. Supports both thinning from below (removing smaller trees)
and thinning from above (removing larger trees) approaches."><meta property="og:image" content="https://cidree.github.io/silviculture/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">silviculture</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Cidree/silviculture" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate Forestry Thinning Schemes</h1>

      <div class="d-none name"><code>silv_treatment_thinning.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates thinning schemes for forest management by selecting trees to extract
based on specified criteria. Supports both thinning from below (removing smaller trees)
and thinning from above (removing larger trees) approaches.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">silv_treatment_thinning</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">var</span>,</span>
<span>  <span class="va">diameter</span>,</span>
<span>  <span class="va">ntrees</span>,</span>
<span>  thinning <span class="op">=</span> <span class="st">"below"</span>,</span>
<span>  perc <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  .groups <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame, or silviculture::Inventory object. See details.</p></dd>


<dt id="arg-var">var<a class="anchor" aria-label="anchor" href="#arg-var"></a></dt>
<dd><p>A variable used for calculating the thinning. Typically used variables
basal area, number of trees, or volume</p></dd>


<dt id="arg-diameter">diameter<a class="anchor" aria-label="anchor" href="#arg-diameter"></a></dt>
<dd><p>Numeric vector with diametric classes</p></dd>


<dt id="arg-ntrees">ntrees<a class="anchor" aria-label="anchor" href="#arg-ntrees"></a></dt>
<dd><p>Numeric vector with the number of trees per hectare of each diametric
class</p></dd>


<dt id="arg-thinning">thinning<a class="anchor" aria-label="anchor" href="#arg-thinning"></a></dt>
<dd><p>Charater string specifying the thinning type. Available options
are <code>below</code> and <code>above</code></p></dd>


<dt id="arg-perc">perc<a class="anchor" aria-label="anchor" href="#arg-perc"></a></dt>
<dd><p>Numeric value between 0 and 1 specifying the percentage of <code>var</code>
to extract</p></dd>


<dt id="arg--groups">.groups<a class="anchor" aria-label="anchor" href="#arg--groups"></a></dt>
<dd><p>A character vector with variables to group by (e.g. plot id, tree
species, etc). Ignored when using a <code>silviculture::Inventory</code> object</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>silviculture::Thinning</code> object with three items:</p><ul><li><p><strong>data</strong>: the input data with two new columns</p></li>
<li><p><strong>group_metrics</strong>: it will include the data from the <code>silviculture::Inventory</code> object</p></li>
<li><p><strong>thinning_opts</strong>: options used for S7 methods</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function implements common silvicultural thinning practices:</p>
<p><strong>Thinning from below:</strong> Removes trees with the lowest values of the specified
variable. This approach typically removes suppressed, damaged, or poor-quality
trees, mimicking natural mortality processes.</p>
<p><strong>Thinning from above:</strong> Removes trees with the highest values of the specified
variable. This approach harvests the most valuable trees while leaving smaller
trees to continue growing.</p>
<p>The function calculates which trees to extract based on the ranking of the
specified variable and the desired thinning percentage. When grouping variables
are provided, thinning is calculated separately for each group.</p>
<p><strong>Using a silviculture::Inventory object</strong>
The result of <code><a href="silv_summary.html">silv_summary()</a></code> can be used as the <code>data</code> argument. If so, the <code>.groups</code>
will be taken from this object, and it will keep the previous data in a new S7 object.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="silv_summary.html">silv_summary()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Get summary of inventory data</span></span></span>
<span class="r-in"><span><span class="va">inventory</span> <span class="op">&lt;-</span> <span class="va">inventory_samples</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="silv_summary.html">silv_summary</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   diameter  <span class="op">=</span> <span class="va">diameter</span>,</span></span>
<span class="r-in"><span>   height    <span class="op">=</span> <span class="va">height</span>,</span></span>
<span class="r-in"><span>   plot_size <span class="op">=</span> <span class="fl">25</span>,</span></span>
<span class="r-in"><span>   .groups   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'plot_id'</span>, <span class="st">'species'</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Thinning from below removing 30% of trees based on basal area</span></span></span>
<span class="r-in"><span><span class="fu">silv_treatment_thinning</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data     <span class="op">=</span> <span class="va">inventory</span>,</span></span>
<span class="r-in"><span>  var      <span class="op">=</span> <span class="va">g_ha</span>,</span></span>
<span class="r-in"><span>  diameter <span class="op">=</span> <span class="va">dclass</span>,</span></span>
<span class="r-in"><span>  ntrees   <span class="op">=</span> <span class="va">ntrees_ha</span>,</span></span>
<span class="r-in"><span>  thinning <span class="op">=</span> <span class="st">"below"</span>,</span></span>
<span class="r-in"><span>  perc     <span class="op">=</span> <span class="fl">0.3</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;silviculture::Thinning&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ data         : tibble [57 × 11] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ plot_id          : int [1:57] 7 7 7 7 7 7 7 8 8 8 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ species          : int [1:57] 27 27 27 27 27 27 27 28 28 81 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dclass           : num [1:57] 25 35 45 50 55 60 120 55 60 10 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ height           : num [1:57] 12.9 16.5 14.6 18 17.6 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees           : int [1:57] 1 1 2 3 5 3 1 1 1 3 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees_ha        : num [1:57] 5.09 5.09 10.19 15.28 25.46 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h0               : num [1:57] 17.4 17.4 17.4 17.4 17.4 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dg               : num [1:57] 57.9 57.9 57.9 57.9 57.9 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ g_ha             : num [1:57] 0.0491 0.0962 0.159 0.1963 0.2376 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ g_ha_extract     : num [1:57] 0.0491 0.0962 0.159 0.1963 0.1449 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees_ha_extract: num [1:57] 5.09 5.09 10.19 15.28 15.53 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ group_metrics: tibble [14 × 15] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ plot_id  : int [1:14] 7 8 8 8 8 10 10 10 10 53 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ species  : int [1:14] 27 28 81 83 294 27 72 81 83 27 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d_mean   : num [1:14] 54.7 57.5 15 14.3 14 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d_median : num [1:14] 55 55 15 10 15 85 35 15 15 40 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d_sd     : num [1:14] 19.16 2.5 6.12 4.95 2 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dg       : num [1:14] 57.9 57.6 16.2 15.1 14.1 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h_mean   : num [1:14] 17.42 17.5 6.29 5.67 6.74 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h_median : num [1:14] 17.64 15.5 5.87 6.1 7.12 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h_sd     : num [1:14] 1.924 2 0.525 0.495 0.77 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h_lorey  : num [1:14] 18.54 17.67 6.11 5.35 6.93 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h0       : num [1:14] 17.42 17.5 6.29 5.67 6.74 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees   : int [1:14] 16 2 8 7 5 6 4 10 5 19 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees_ha: num [1:14] 81.5 10.2 40.7 35.7 25.5 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ g_ha     : num [1:14] 2.152 0.5203 0.0962 0.0393 0.0255 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ spacing  : num [1:14] 63.6 179 249.2 295.3 294 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ thinning_opts:List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ var_name   : chr "g_ha_extract"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ dclass_name: chr "dclass"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ thinning   : chr "below"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ percentage : num 0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ groups     : chr [1:2] "plot_id" "species"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Thinning from above removing 20% of trees based on basal area</span></span></span>
<span class="r-in"><span><span class="fu">silv_treatment_thinning</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data     <span class="op">=</span> <span class="va">inventory</span>,</span></span>
<span class="r-in"><span>  var      <span class="op">=</span> <span class="va">g_ha</span>,</span></span>
<span class="r-in"><span>  diameter <span class="op">=</span> <span class="va">dclass</span>,</span></span>
<span class="r-in"><span>  ntrees   <span class="op">=</span> <span class="va">ntrees_ha</span>,</span></span>
<span class="r-in"><span>  thinning <span class="op">=</span> <span class="st">"above"</span>,</span></span>
<span class="r-in"><span>  perc     <span class="op">=</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;silviculture::Thinning&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ data         : tibble [57 × 11] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ plot_id          : int [1:57] 7 7 7 7 7 7 7 8 8 8 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ species          : int [1:57] 27 27 27 27 27 27 27 28 28 81 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dclass           : num [1:57] 120 60 55 50 45 35 25 60 55 30 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ height           : num [1:57] 20.9 19.1 17.6 18 14.6 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees           : int [1:57] 1 3 5 3 2 1 1 1 1 1 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees_ha        : num [1:57] 5.09 15.28 25.46 15.28 10.19 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h0               : num [1:57] 17.4 17.4 17.4 17.4 17.4 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dg               : num [1:57] 57.9 57.9 57.9 57.9 57.9 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ g_ha             : num [1:57] 1.131 0.283 0.238 0.196 0.159 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ g_ha_extract     : num [1:57] 0.43 0 0 0 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees_ha_extract: num [1:57] 1.94 0 0 0 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ group_metrics: tibble [14 × 15] (S3: tbl_df/tbl/data.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ plot_id  : int [1:14] 7 8 8 8 8 10 10 10 10 53 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ species  : int [1:14] 27 28 81 83 294 27 72 81 83 27 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d_mean   : num [1:14] 54.7 57.5 15 14.3 14 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d_median : num [1:14] 55 55 15 10 15 85 35 15 15 40 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ d_sd     : num [1:14] 19.16 2.5 6.12 4.95 2 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dg       : num [1:14] 57.9 57.6 16.2 15.1 14.1 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h_mean   : num [1:14] 17.42 17.5 6.29 5.67 6.74 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h_median : num [1:14] 17.64 15.5 5.87 6.1 7.12 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h_sd     : num [1:14] 1.924 2 0.525 0.495 0.77 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h_lorey  : num [1:14] 18.54 17.67 6.11 5.35 6.93 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ h0       : num [1:14] 17.42 17.5 6.29 5.67 6.74 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees   : int [1:14] 16 2 8 7 5 6 4 10 5 19 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ntrees_ha: num [1:14] 81.5 10.2 40.7 35.7 25.5 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ g_ha     : num [1:14] 2.152 0.5203 0.0962 0.0393 0.0255 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ spacing  : num [1:14] 63.6 179 249.2 295.3 294 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ thinning_opts:List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ var_name   : chr "g_ha_extract"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ dclass_name: chr "dclass"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ thinning   : chr "above"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ percentage : num 0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  .. $ groups     : chr [1:2] "plot_id" "species"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://adrian-cidre.com/" class="external-link">Adrián Cidre González</a>, Aitor Vázquez Veloso.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

